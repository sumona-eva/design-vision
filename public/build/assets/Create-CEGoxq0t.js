import{u as G,B as M,D as O,r as f,o as D,a as h,b as a,c as w,w as F,i as e,E as i,G as n,h as k,e as r,f as C,F as V,j as c,g as T,k as d,H as J}from"./app-CmCiYzWS.js";import{S as K}from"./SummernoteEditor-DCcXo0H7.js";const $={class:"p-4 bg-white shadow-md me-4"},q=e("h3",{class:"text-sm mb-5"},"Add New Project",-1),z={class:"flex flex-wrap"},H={class:"w-1/2 flex flex-col gap-3 px-2"},W={class:"w-full px-2"},Q=e("label",{for:"title",class:"text-xs mb-1"},"Project Name",-1),X={class:"w-full flex items-center space-x-5 px-2"},Y={class:"w-1/2"},Z=e("label",{for:"category",class:"text-xs mb-1"},"Category",-1),ee={class:"w-1/2"},te=e("label",{for:"title",class:"text-xs mb-1"},"Order Number",-1),se={class:"w-full"},oe={class:"flex flex-wrap"},le={class:"w-full px-2"},ae=e("label",{for:"socials"},"Specification",-1),re={class:"mb-3 p-4 border border-gray-500 rounded relative"},ie={class:"flex -mx-3"},ne={class:"w-1/3 px-2 mb-3"},ce=e("label",{for:"key"},"Key",-1),de=["onUpdate:modelValue"],ue={class:"w-2/3 px-2"},pe=e("label",{for:"value"},"Value",-1),_e=["onUpdate:modelValue"],me={class:"w-1/2 flex flex-col gap-4 px-2"},ve={class:"flex"},fe={class:"pr-2"},he=e("label",{for:"image",class:"text-xs block mb-1"},"Cover Image",-1),be={for:"cover_image",class:"w-52 h-36 flex items-center justify-center gap-3 p-2 border border-dashed border-primary rounded-md text-primary cursor-pointer"},xe=["src"],ge={key:1},ye=e("p",{class:"text-xs"},"Upload Product Cover Image",-1),we=[ye],ke={class:"w-full"},Ce={class:"p-2 border border-primary rounded-lg"},Ve=e("h4",{class:"mb-3 text-sm"},"Project Images",-1),Ue=e("ul",{class:"mb-2"},[e("li",{class:"text-xs"},"999 KB limit."),e("li",{class:"text-xs"},[d("Allowed types: "),e("span",{class:"text-primary"}," JPG"),d(", "),e("span",{class:"text-primary"},"JPEG"),d(", "),e("span",{class:"text-primary"},"PNG"),d(".")])],-1),je={class:"file-upload-container"},Se={class:"file-upload-container-wrapper"},Le=["src"],Pe=["onClick"],Ae={class:"file-upload-container-wrapper__add"},Ie={for:"mu-file-input",class:"file-upload-container__add-btn"},Ne={class:"w-full px-2 editor mt-5"},Re=e("label",{for:"title",class:"text-sm mb-1 text-black py-3 block"},"Description",-1),Be={class:"editor_data"},Fe={__name:"Create",setup(Ee){const{loading:Ge,error:Me,sendRequest:b}=G(),U=M(),j=O(),u=f(null),S=async()=>{const t=await b({method:"get",url:"/v1/project-category"});u.value=t==null?void 0:t.data},p=f(null),L=t=>{const s=t.target.files[0];o.value.cover_image=s,p.value=URL.createObjectURL(s)},P=t=>{for(let s=0;s<t.target.files.length;s++)o.value.images.push({url:URL.createObjectURL(t.target.files[s]),file:t.target.files[s]})},A=t=>{let s=o.value.images[t];s.url.startsWith("blob:")&&URL.revokeObjectURL(s.url),o.value.images.splice(t,1)},I=()=>{o.value.specification.push({key:null,value:null})},N=t=>o.value.specification.splice(t,1),o=f({title:null,category_id:null,cover_image:null,order_number:null,description:null,images:[],specification:[{key:null,value:null}]}),R=async()=>{const t=await b({method:"post",url:"/v1/project",data:o.value,headers:{authorization:`Bearer ${U.user.token}`,"Content-Type":"multipart/form-data"}});t!=null&&t.data&&(J.success(" Product Added Successfully",{autoclose:1e3,theme:"dark"}),await j.push("/admin/projects"))};return D(()=>{S()}),(t,s)=>{const B=h("Select"),_=h("Icon"),E=h("AppLayout");return a(),w(E,null,{default:F(()=>{var x,g;return[e("div",$,[q,e("div",z,[e("div",H,[e("div",W,[Q,i(e("input",{type:"text",class:"bg-transparent p-2 border border-primary w-full rounded","onUpdate:modelValue":s[0]||(s[0]=l=>o.value.title=l)},null,512),[[n,o.value.title]])]),e("div",X,[e("div",Y,[Z,(x=u.value)!=null&&x.data?(a(),w(B,{key:0,label:"name",options:(g=u.value)==null?void 0:g.data,reduce:l=>l.id,searchable:!0,modelValue:o.value.category_id,"onUpdate:modelValue":s[1]||(s[1]=l=>o.value.category_id=l),placeholder:"Set Category"},null,8,["options","reduce","modelValue"])):k("",!0)]),e("div",ee,[te,i(e("input",{type:"number",class:"bg-transparent p-2 border border-primary w-full rounded","onUpdate:modelValue":s[2]||(s[2]=l=>o.value.order_number=l)},null,512),[[n,o.value.order_number]])])]),e("div",se,[e("div",oe,[e("div",le,[e("div",{class:"flex items-center gap-1"},[ae,e("button",{onClick:I,class:"text-sm bg-primary text-white rounded px-1"},"Add More")]),(a(!0),r(V,null,C(o.value.specification,(l,y)=>{var m;return a(),r("div",re,[((m=o.value.specification)==null?void 0:m.length)>1?(a(),r("button",{key:0,class:"absolute top-1 right-1 bg-primary rounded",onClick:N},[c(_,{name:"material-symbols:close",class:"text-white"})])):k("",!0),e("div",ie,[e("div",ne,[ce,i(e("input",{"onUpdate:modelValue":v=>l.key=v,type:"text",class:"w-full p-2 rounded bg-transparent border focus:outline-none focus:ring-primary"},null,8,de),[[n,l.key]])]),e("div",ue,[pe,i(e("input",{"onUpdate:modelValue":v=>l.value=v,type:"text",class:"w-full p-2 rounded bg-transparent border focus:outline-none focus:ring-primary"},null,8,_e),[[n,l.value]])])])])}),256))])])])]),e("div",me,[e("div",ve,[e("div",fe,[he,e("label",be,[e("input",{type:"file",id:"cover_image",hidden:"",onChange:L},null,32),p.value?(a(),r("img",{key:0,src:p.value,class:"w-full h-full object-cover"},null,8,xe)):(a(),r("div",ge,we))])])]),e("div",ke,[e("div",Ce,[Ve,Ue,e("div",je,[e("div",Se,[(a(!0),r(V,null,C(o.value.images,(l,y)=>(a(),r("div",{class:"file-upload-container-wrapper__preview",key:l.index},[e("img",{src:l.url,class:"file-upload-container-wrapper__preview-item"},null,8,Le),e("button",{onClick:m=>A(y),class:"file-upload-container-wrapper__preview-cancel",type:"button"},[c(_,{name:"material-symbols:close",class:"text-white"})],8,Pe)]))),128)),e("div",Ae,[e("label",Ie,[e("span",null,[c(_,{name:"tabler:cloud-upload"})])]),e("input",{onChange:P,id:"mu-file-input",type:"file",accept:"image/*",multiple:"",hidden:""},null,32)])])])])])]),e("div",Ne,[Re,e("div",Be,[c(T(K),{modelValue:o.value.description,"onUpdate:modelValue":s[3]||(s[3]=l=>o.value.description=l)},null,8,["modelValue"])])])])]),e("div",{class:"text-center pt-10"},[e("button",{class:"w-1/2 mx-auto bg-primary py-3 text-white",onClick:R},"Save Project")])]}),_:1})}}};export{Fe as default};
