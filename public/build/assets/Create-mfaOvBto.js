import{u as E,B as G,D as M,r as f,o as O,a as h,b as a,c as w,w as D,i as e,E as r,G as n,h as k,e as i,f as C,F as V,j as c,g as F,k as d,H as T}from"./app-CocF3L7H.js";import{S as J}from"./SummernoteEditor-az_x2Ca7.js";const K={class:"p-4 bg-white shadow-md me-4"},q=e("h3",{class:"text-sm mb-5"},"Add New Project",-1),H={class:"flex flex-wrap"},W={class:"w-1/2 flex flex-col gap-3 px-2"},$={class:"w-full px-2"},z=e("label",{for:"title",class:"text-xs mb-1"},"Project Name",-1),Q={class:"w-full flex items-center space-x-5 px-2"},X={class:"w-1/2"},Y=e("label",{for:"category",class:"text-xs mb-1"},"Category",-1),Z={class:"w-1/2"},ee=e("label",{for:"title",class:"text-xs mb-1"},"Order Number",-1),te={class:"w-full"},se={class:"flex flex-wrap"},oe={class:"w-full px-2"},le=e("label",{for:"socials"},"Specification",-1),ae={class:"mb-3 p-4 border border-gray-500 rounded relative"},ie={class:"flex -mx-3"},re={class:"w-1/3 px-2 mb-3"},ne=e("label",{for:"key"},"Key",-1),ce=["onUpdate:modelValue"],de={class:"w-2/3 px-2"},ue=e("label",{for:"value"},"Value",-1),pe=["onUpdate:modelValue"],_e={class:"w-1/2 flex flex-col gap-4 px-2"},me={class:"flex"},ve={class:"pr-2"},fe=e("label",{for:"image",class:"text-xs block mb-1"},"Cover Image",-1),he={for:"cover_image",class:"w-52 h-36 flex items-center justify-center gap-3 p-2 border border-dashed border-primary rounded-md text-primary cursor-pointer"},be=["src"],xe={key:1},ge=e("p",{class:"text-xs"},"Upload Product Cover Image",-1),ye=[ge],we={class:"w-full"},ke={class:"p-2 border border-primary rounded-lg"},Ce=e("h4",{class:"mb-3 text-sm"},"Project Images",-1),Ve=e("ul",{class:"mb-2"},[e("li",{class:"text-xs"},"999 KB limit."),e("li",{class:"text-xs"},[d("Allowed types: "),e("span",{class:"text-primary"}," JPG"),d(", "),e("span",{class:"text-primary"},"JPEG"),d(", "),e("span",{class:"text-primary"},"PNG"),d(".")])],-1),Ue={class:"file-upload-container"},je={class:"file-upload-container-wrapper"},Se=["src"],Le=["onClick"],Pe={class:"file-upload-container-wrapper__add"},Ae={for:"mu-file-input",class:"file-upload-container__add-btn"},Ie={class:"w-full px-2 editor mt-5"},Ne=e("label",{for:"title",class:"text-sm mb-1 text-black py-3 block"},"Description",-1),Re={class:"editor_data"},De={__name:"Create",setup(Be){const{loading:Ee,error:Ge,sendRequest:b}=E();G();const U=M(),u=f(null),j=async()=>{const t=await b({method:"get",url:"/v1/project-category"});u.value=t==null?void 0:t.data},p=f(null),S=t=>{const s=t.target.files[0];o.value.cover_image=s,p.value=URL.createObjectURL(s)},L=t=>{for(let s=0;s<t.target.files.length;s++)o.value.images.push({url:URL.createObjectURL(t.target.files[s]),file:t.target.files[s]})},P=t=>{let s=o.value.images[t];s.url.startsWith("blob:")&&URL.revokeObjectURL(s.url),o.value.images.splice(t,1)},A=()=>{o.value.specification.push({key:null,value:null})},I=t=>o.value.specification.splice(t,1),o=f({title:null,category_id:null,cover_image:null,order_number:null,description:null,images:[],specification:[{key:null,value:null}]}),N=async()=>{const t=await b({method:"post",url:"/v1/project",data:o.value,headers:{"Content-Type":"multipart/form-data"}});t!=null&&t.data&&(T.success(" Product Added Successfully",{autoclose:1e3,theme:"dark"}),await U.push("/admin/projects"))};return O(()=>{j()}),(t,s)=>{const R=h("Select"),_=h("Icon"),B=h("AppLayout");return a(),w(B,null,{default:D(()=>{var x,g;return[e("div",K,[q,e("div",H,[e("div",W,[e("div",$,[z,r(e("input",{type:"text",class:"bg-transparent p-2 border border-primary w-full rounded","onUpdate:modelValue":s[0]||(s[0]=l=>o.value.title=l)},null,512),[[n,o.value.title]])]),e("div",Q,[e("div",X,[Y,(x=u.value)!=null&&x.data?(a(),w(R,{key:0,label:"name",options:(g=u.value)==null?void 0:g.data,reduce:l=>l.id,searchable:!0,modelValue:o.value.category_id,"onUpdate:modelValue":s[1]||(s[1]=l=>o.value.category_id=l),placeholder:"Set Category"},null,8,["options","reduce","modelValue"])):k("",!0)]),e("div",Z,[ee,r(e("input",{type:"number",class:"bg-transparent p-2 border border-primary w-full rounded","onUpdate:modelValue":s[2]||(s[2]=l=>o.value.order_number=l)},null,512),[[n,o.value.order_number]])])]),e("div",te,[e("div",se,[e("div",oe,[e("div",{class:"flex items-center gap-1"},[le,e("button",{onClick:A,class:"text-sm bg-primary text-white rounded px-1"},"Add More")]),(a(!0),i(V,null,C(o.value.specification,(l,y)=>{var m;return a(),i("div",ae,[((m=o.value.specification)==null?void 0:m.length)>1?(a(),i("button",{key:0,class:"absolute top-1 right-1 bg-primary rounded",onClick:I},[c(_,{name:"material-symbols:close",class:"text-white"})])):k("",!0),e("div",ie,[e("div",re,[ne,r(e("input",{"onUpdate:modelValue":v=>l.key=v,type:"text",class:"w-full p-2 rounded bg-transparent border focus:outline-none focus:ring-primary"},null,8,ce),[[n,l.key]])]),e("div",de,[ue,r(e("input",{"onUpdate:modelValue":v=>l.value=v,type:"text",class:"w-full p-2 rounded bg-transparent border focus:outline-none focus:ring-primary"},null,8,pe),[[n,l.value]])])])])}),256))])])])]),e("div",_e,[e("div",me,[e("div",ve,[fe,e("label",he,[e("input",{type:"file",id:"cover_image",hidden:"",onChange:S},null,32),p.value?(a(),i("img",{key:0,src:p.value,class:"w-full h-full object-cover"},null,8,be)):(a(),i("div",xe,ye))])])]),e("div",we,[e("div",ke,[Ce,Ve,e("div",Ue,[e("div",je,[(a(!0),i(V,null,C(o.value.images,(l,y)=>(a(),i("div",{class:"file-upload-container-wrapper__preview",key:l.index},[e("img",{src:l.url,class:"file-upload-container-wrapper__preview-item"},null,8,Se),e("button",{onClick:m=>P(y),class:"file-upload-container-wrapper__preview-cancel",type:"button"},[c(_,{name:"material-symbols:close",class:"text-white"})],8,Le)]))),128)),e("div",Pe,[e("label",Ae,[e("span",null,[c(_,{name:"tabler:cloud-upload"})])]),e("input",{onChange:L,id:"mu-file-input",type:"file",accept:"image/*",multiple:"",hidden:""},null,32)])])])])])]),e("div",Ie,[Ne,e("div",Re,[c(F(J),{modelValue:o.value.description,"onUpdate:modelValue":s[3]||(s[3]=l=>o.value.description=l)},null,8,["modelValue"])])])])]),e("div",{class:"text-center pt-10"},[e("button",{class:"w-1/2 mx-auto bg-primary py-3 text-white",onClick:N},"Save Project")])]}),_:1})}}};export{De as default};
