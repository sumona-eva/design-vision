import{t as L,Q as N,R,r as d,a as I,e as u,f as a,m as x,k as A,i as e,M as p,N as _,E as B,g as r,l as E,F as M,j as m,u as O,q as i,P as D}from"./app-CJCNr1XW.js";import{S as F}from"./SummernoteEditor-B--EspMn.js";const G={class:"p-4 bg-secondary shadow-md me-4"},T=e("h3",{class:"text-sm mb-5"},"Add New Project",-1),q={class:"flex flex-wrap"},J={class:"w-1/2 flex flex-col gap-3 px-2"},$={class:"w-full px-2"},z=e("label",{for:"title",class:"text-xs mb-1"},"Project Name",-1),K={class:"w-full flex items-center space-x-5 px-2"},Q={class:"w-1/2"},W=e("label",{for:"category",class:"text-xs mb-1"},"Category",-1),H={class:"w-1/2"},X=e("label",{for:"title",class:"text-xs mb-1"},"Order Number",-1),Y={class:"w-full"},Z=e("label",{for:"title",class:"text-xs mb-1"},"Short Description",-1),ee={class:"w-1/2 flex flex-col gap-4 px-2"},te={class:"flex"},se={class:"pr-2"},oe=e("label",{for:"image",class:"text-xs block mb-1"},"Cover Image",-1),le={for:"cover_image",class:"w-52 h-36 flex items-center justify-center gap-3 p-2 border border-dashed border-primary rounded-md text-primary cursor-pointer"},ae=["src"],re={key:1},ie=e("p",{class:"text-xs"},"Upload Product Cover Image",-1),ne=[ie],ce={class:"w-full"},de={class:"p-2 border border-primary rounded-lg"},ue=e("h4",{class:"mb-3 text-sm"},"Project Images",-1),pe=e("ul",{class:"mb-2"},[e("li",{class:"text-xs"},"999 KB limit."),e("li",{class:"text-xs"},[i("Allowed types: "),e("span",{class:"text-primary"}," JPG"),i(", "),e("span",{class:"text-primary"},"JPEG"),i(", "),e("span",{class:"text-primary"},"PNG"),i(".")])],-1),_e={class:"file-upload-container"},me={class:"file-upload-container-wrapper"},ve=["src"],he=["onClick"],fe={class:"file-upload-container-wrapper__add"},be={for:"mu-file-input",class:"file-upload-container__add-btn"},xe={class:"w-full px-2 editor mt-5"},ge=e("label",{for:"title",class:"text-sm mb-1 text-white py-3 block"},"Description",-1),ye={class:"editor_data"},Se={__name:"Create",setup(we){const{loading:je,error:ke,sendRequest:v}=L(),g=N(),y=R(),n=d(null),w=async()=>{const s=await v({method:"get",url:"/v1/project-category"});n.value=s==null?void 0:s.data},c=d(null),j=s=>{const t=s.target.files[0];o.value.cover_image=t,c.value=URL.createObjectURL(t)},k=s=>{for(let t=0;t<s.target.files.length;t++)o.value.images.push({url:URL.createObjectURL(s.target.files[t]),file:s.target.files[t]})},C=s=>{let t=o.value.images[s];t.url.startsWith("blob:")&&URL.revokeObjectURL(t.url),o.value.images.splice(s,1)},o=d({title:null,project_category_id:null,cover_image:null,order_number:null,short_description:null,description:null,images:[]}),V=async()=>{const s=await v({method:"post",url:"/v1/project",data:o.value,headers:{authorization:`Bearer ${g.user.token}`,"Content-Type":"multipart/form-data"}});s!=null&&s.data&&(D.success(" Product Added Successfully",{autoclose:1e3,theme:"dark"}),await y.push("/admin/projects"))};return I(()=>{w()}),(s,t)=>{const U=u("Select"),h=u("Icon"),S=u("AppLayout");return a(),x(S,null,{default:A(()=>{var f,b;return[e("div",G,[T,e("div",q,[e("div",J,[e("div",$,[z,p(e("input",{type:"text",class:"bg-transparent p-2 border border-primary w-full rounded","onUpdate:modelValue":t[0]||(t[0]=l=>o.value.title=l)},null,512),[[_,o.value.title]])]),e("div",K,[e("div",Q,[W,(f=n.value)!=null&&f.data?(a(),x(U,{key:0,label:"name",options:(b=n.value)==null?void 0:b.data,reduce:l=>l.id,searchable:!0,modelValue:o.value.project_category_id,"onUpdate:modelValue":t[1]||(t[1]=l=>o.value.project_category_id=l),placeholder:"Set Category"},null,8,["options","reduce","modelValue"])):B("",!0)]),e("div",H,[X,p(e("input",{type:"number",class:"bg-transparent p-2 border border-primary w-full rounded","onUpdate:modelValue":t[2]||(t[2]=l=>o.value.order_number=l)},null,512),[[_,o.value.order_number]])])]),e("div",Y,[Z,p(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=l=>o.value.short_description=l),class:"bg-transparent p-2 border border-primary w-full rounded h-32"},null,512),[[_,o.value.short_description]])])]),e("div",ee,[e("div",te,[e("div",se,[oe,e("label",le,[e("input",{type:"file",id:"cover_image",hidden:"",onChange:j},null,32),c.value?(a(),r("img",{key:0,src:c.value,class:"w-full h-full object-cover"},null,8,ae)):(a(),r("div",re,ne))])])]),e("div",ce,[e("div",de,[ue,pe,e("div",_e,[e("div",me,[(a(!0),r(M,null,E(o.value.images,(l,P)=>(a(),r("div",{class:"file-upload-container-wrapper__preview",key:l.index},[e("img",{src:l.url,class:"file-upload-container-wrapper__preview-item"},null,8,ve),e("button",{onClick:Ce=>C(P),class:"file-upload-container-wrapper__preview-cancel",type:"button"},[m(h,{name:"material-symbols:close",class:"text-white"})],8,he)]))),128)),e("div",fe,[e("label",be,[e("span",null,[m(h,{name:"tabler:cloud-upload"})])]),e("input",{onChange:k,id:"mu-file-input",type:"file",accept:"image/*",multiple:"",hidden:""},null,32)])])])])])]),e("div",xe,[ge,e("div",ye,[m(O(F),{modelValue:o.value.description,"onUpdate:modelValue":t[4]||(t[4]=l=>o.value.description=l)},null,8,["modelValue"])])])])]),e("div",{class:"text-center pt-10"},[e("button",{class:"w-1/2 mx-auto bg-primary py-3",onClick:V},"Save Project")])]}),_:1})}}};export{Se as default};
